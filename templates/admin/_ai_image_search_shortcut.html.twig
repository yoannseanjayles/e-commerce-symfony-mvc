{#
  Small helper panel to access the AI image search/import page from any EasyAdmin form.
  Expected vars:
  - productId (int|string)
  - variantId (int|string, optional)
#}

{% set pid = productId|default('') %}
{% set vid = variantId|default('') %}

{% if pid %}
    {% set urlBuilder = ea_url().setController('App\\Controller\\Admin\\ImagesCrudController').setAction('gptFindImagesForm') %}
    {% set urlBuilder = urlBuilder.set('productId', pid).set('backUrl', app.request.uri) %}
    {% if vid %}{% set urlBuilder = urlBuilder.set('variantId', vid) %}{% endif %}

    <div class="content-panel">
        <div class="content-panel-header">
            <h3 class="content-panel-title">üñºÔ∏è Images (IA)</h3>
        </div>
        <div class="content-panel-body">
            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <div class="text-muted small">
                    Cherche des images t√©l√©chargeables et ajoute-les au produit (avec colorTag si variante).
                </div>
                <a class="btn btn-outline-primary" href="{{ urlBuilder }}">üñºÔ∏è IA: chercher des images</a>
            </div>
        </div>
    </div>
{% endif %}
